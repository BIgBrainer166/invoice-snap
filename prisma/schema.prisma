// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  schemas  = ["public", "auth"]
}


model Invoice {
  id             String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  userId         String   @map("user_id") @db.Uuid
  invoiceNumber  String   @map("invoice_number")
  clientName     String   @map("client_name")
  clientEmail    String?  @map("client_email")
  clientAddress  String?  @map("client_address")
  issueDate      DateTime @default(now()) @map("issue_date") @db.Date
  dueDate        DateTime @map("due_date") @db.Date
  items          Json     @default("[]")
  subtotal       Decimal  @default(0) @db.Decimal(10, 2)
  taxRate        Decimal  @default(0) @map("tax_rate") @db.Decimal(5, 2)
  taxAmount      Decimal  @default(0) @map("tax_amount") @db.Decimal(10, 2)
  total          Decimal  @default(0) @db.Decimal(10, 2)
  notes          String?
  status         InvoiceStatus @default(draft)
  templateStyle  String   @default("modern") @map("template_style")
  logoUrl        String?  @map("logo_url")
  logoPosition   String?  @default("right") @map("logo_position")
  createdAt      DateTime @default(now()) @map("created_at") @db.Timestamptz(6)
  updatedAt      DateTime @default(now()) @updatedAt @map("updated_at") @db.Timestamptz(6)

  @@index([userId], map: "invoices_user_id_idx")
  @@index([createdAt(sort: Desc)], map: "invoices_created_at_idx")
  @@map("invoices")
  @@schema("public")
}

model Profile {
  id        String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  userId    String   @unique @map("user_id") @db.Uuid
  fullName  String?  @map("full_name")
  company   String?
  email     String?
  phone     String?
  address   String?
  website   String?
  logoUrl   String?  @map("logo_url")
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamptz(6)
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at") @db.Timestamptz(6)

  @@map("profiles")
  @@schema("public")
}

enum InvoiceStatus {
  draft
  sent
  paid
  overdue
  cancelled

  @@schema("public")
}
